(this["webpackJsonpbattleship-project"]=this["webpackJsonpbattleship-project"]||[]).push([[0],{13:function(e,n,t){},14:function(e,n,t){"use strict";t.r(n);var r=t(1),i=t.n(r),s=t(6),a=t.n(s),c=t(3),u=t(2),o=t(4),l=t.n(o),d=t(0),h=function(e){return e.includes("hit")?"tile ship--hit":e.includes("destroyed")?"tile ship--destroyed":e.includes("miss")?"tile miss":e.includes("sunk")?"tile ship--sunk":""===e||e.includes("null")?"tile":"tile ship"},p=function(e){var n=e.playerBoard,t=e.addPlayerShip,r=e.showShipPreview,i=e.hideShipPreview,s=e.hasGameStarted;return Object(d.jsxs)("section",{className:"player-board",children:[Object(d.jsx)("h1",{children:s?"You":"Place your ships, ready for battle!"}),Object(d.jsx)("section",{className:s?"board-grid":"board-grid --hover",children:function(){var e=-1;return n.board.map((function(n){return Object(d.jsx)("div",{className:h(n),id:e+=1,onClick:function(e){return t(+e.target.id)},onMouseEnter:r,onMouseOut:i},l()())}))}()})]})},f=function(e){return e.includes("hit")?"tile ship--hit":e.includes("destroyed")?"tile ship--destroyed":e.includes("miss")?"tile miss":e.includes("sunk")?"tile ship--sunk":"tile"},b=function(e){var n=e.computerBoard,t=e.handlePlayerAttack,r=e.hasGameStarted;return Object(d.jsxs)("section",{className:r?"computer-board-start":"computer-board",children:[Object(d.jsx)("h1",{children:"Computer"}),Object(d.jsx)("section",{className:"board-grid --hover",children:function(){var e=-1;return n.board.map((function(n){return Object(d.jsx)("div",{className:f(n),id:e+=1,onClick:function(e){return t(+e.target.id)},onMouseOver:function(e){return e.target.style.backgroundColor="#C83737"},onMouseLeave:function(e){return e.target.style.backgroundColor=""}},l()())}))}()})]})},v=function(e){var n=e.hasGameStarted,t=e.addPlayerShip,r=e.handlePlayerAttack,i=e.playerBoard,s=e.computerBoard,a=e.showShipPreview,c=e.hideShipPreview;return Object(d.jsxs)("section",{className:"game-board",children:[Object(d.jsx)(p,{playerBoard:i,addPlayerShip:t,showShipPreview:a,hideShipPreview:c,hasGameStarted:n}),!1===n?"":Object(d.jsx)(b,{computerBoard:s,handlePlayerAttack:r,hasGameStarted:n})]})},j=function(e){var n=e.prop;return Object(d.jsxs)("section",{className:n,children:[Object(d.jsx)("h1",{children:"YOU LOST!"}),Object(d.jsx)("h3",{children:"Click anywhere to play again"})]})},k=function(e){var n=e.prop;return Object(d.jsxs)("section",{className:n,children:[Object(d.jsx)("h1",{children:"YOU WON!"}),Object(d.jsx)("h3",{children:"Click anywhere to play again"})]})},m=function(e){var n=e.whoLost,t=e.resetGame;return Object(d.jsx)("section",{onClick:t,children:"computer"===n?Object(d.jsx)(k,{prop:"end --win"}):Object(d.jsx)(j,{prop:"end --defeat"})})},O=function(e){var n=e.triggerGameStart,t=e.switchShipAxis,r=e.removeLastShip,i=e.randomlyAddPlayerShips,s=e.verticalAxis,a=e.hasGameStarted,c=e.resetGame;return Object(d.jsxs)("header",{children:[Object(d.jsx)("button",{onClick:a?c:n,children:a?"Restart":"Start Game"}),a?"":Object(d.jsxs)("button",{className:"switch-axis-btn",onClick:t,children:["AXIS: ",s?"Y":"X"]}),a?"":Object(d.jsx)("button",{className:"remove-ship-btn",onClick:r,children:"Remove ship"}),a?"":Object(d.jsx)("button",{onClick:i,children:"Random Ships"})]})},S=function(){return Object(d.jsx)("footer",{children:Object(d.jsxs)("h3",{children:["This Project is part of",Object(d.jsx)("a",{href:"https://www.theodinproject.com/",target:"_blank",children:"The odin Project's"}),"Full Stack Javascript Curriculum"]})})},g=function(e,n,t){var r={Carrier:5,Battleship:4,Cruiser:3,Submarine:3,Destroyer:2}[e],i={shipName:e,length:r,index:t,hits:0,axis:n,isSunk:!1,addHit:function(){i.hits++,i.hits>=r&&(i.isSunk=!0)}};return i},y=function(){var e={Carrier:5,Battleship:4,Cruiser:3,Submarine:3,Destroyer:2},n=function(){return l.verticalShip=!l.verticalShip},t=function(n){var t=l.board,r=l.shipsOnBoard,i=r[n].axis,s=r[n].index,a=e[n],c=1;if("X"===i){s%10!=0&&(t[s-1]="null",""===t[s-1+10]&&(t[s-1+10]="null"),""===t[s-1-10]&&(t[s-1-10]="null")),(s+a)%10!=0&&(t[s+a]="null",""===t[s+a+10]&&(t[s+a+10]="null"),""===t[s+a-10]&&(t[s+a-10]="null"));for(var u=s;u<s+a;u++)t[u]="".concat(n).concat(c),u+10<100&&(t[u+10]="null"),u-10>-1&&(t[u-10]="null"),c++}else{s>=10&&(t[s-10]="null",""==t[s-10+1]&&(s-9)%10!=0&&(t[s-10+1]="null"),""==t[s-10-1]&&s%10!=0&&(t[s-10-1]="null")),s+10*a<100&&(t[s+10*a]="null",""==t[s+10*a+1]&&(s-9)%10!=0&&(t[s+10*a+1]="null"),""==t[s+10*a-1]&&s%10!=0&&(t[s+10*a-1]="null"));for(var o=s;o<s+10*r[n].length;o+=10)t[o]="".concat(n).concat(c),o%10!=0&&(t[o-1]="null"),(o-9)%10!=0&&(t[o+1]="null"),c++}},r=function(){for(var e=l.shipsOnBoard,n=l.board,r=0;r<n.length;r++)n[r]="";for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];t(a)}},i=function(n){var t=l.board,r=l.verticalShip,i=e[n],s=[];if(r){for(var a=0;a<t.length;a++)if(!(a+10*i>109)&&""===t[a]){for(var c=1,u=a+10;u<10*i+a&&""===t[u];u+=10)c++;c===i&&s.push(a)}}else for(var o=0;o<100;o++){var d="".concat(o);if(""===t[o]&&(d[1]<11-i||d<11-i)){for(var h=1,p=o+1;p<i+o&&""===t[p];p++)h++;h===i&&s.push(o)}}return s},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return Math.floor(Math.random()*e)},a=function(e){Math.random()>.5&&n();var t=i(e);0===t.length&&(l.changeShipDirection(),t=i(e));var r=s(t.length);l.addShipToBoard(t[r],e)},c=function(){var e=l.recieveAttack,n=l.attackedPositions,t=function(){for(var e=l.attackedPositions,n=[],t=0;t<100;t++)if(!e.includes(t)){var r=0;(t%10===0||e.includes(t-1))&&r++,((t-9)%10===0||e.includes(t+1))&&r++,(t-10<0||e.includes(t-10))&&r++,(t+10>100||e.includes(t+10))&&r++,r>=4&&n.push(t)}return n}();console.log(t);for(var r=s();n.includes(r)||t.includes(r);)r=s();e(r)},o=function(){var e=l.recieveAttack,n=l.posiblePositions;!function(){var e=l.board,n=l.lastHitIndex,t=l.shipToDestroy,r=l.shipsOnBoard,i=l.attackedPositions,s=l.posiblePositions;if(r[t].hits>1){for(var a,c,u=0;void 0===a;u++)e[u].includes(t)&&e[u].includes("hit")&&(a=u);for(var o=99;void 0===c;o--)e[o].includes(t)&&e[o].includes("hit")&&(c=o);"X"==r[t].axis?(i.includes(a-1)||a%10===0||s.push(a-1),i.includes(c+1)||(c-9)%10===0||s.push(c+1)):(!i.includes(a-10)&&a-10>-1&&s.push(a-10),!i.includes(c+10)&&c+10<100&&s.push(c+10))}else n+10<100&&(i.includes(n+10)||s.push(n+10)),n-10>=0&&(i.includes(n-10)||s.push(n-10)),(n-9)%10!==0&&(i.includes(n+1)||s.push(n+1)),n%10!==0&&(i.includes(n-1)||s.push(n-1))}(),e(n[Math.floor(Math.random()*n.length)])},l={board:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],shipsOnBoard:{},recieveAttack:function(n){var t=l.board,r=l.shipsOnBoard,i=l.attackedPositions,s=t[n];if(""===s)t[n]="miss";else if("null"===s)t[n]+="-miss";else{var a=s.slice(0,-1);r[a].addHit(),t[n]+="-hit",r[a].isSunk?(!function(n){var t=l.board,r=l.shipsOnBoard,i=l.attackedPositions,s=e[n],a=t.indexOf(t.find((function(e){return e.includes("".concat(n,"1"))})));if("X"===r[n].axis){a%10!=0&&(t[a-1]="null-sunk",i.includes(a-1)||i.push(a-1),a-11>=0&&(t[a-11]="null-sunk",i.includes(a-11)||i.push(a-11)),a+9<100&&(t[a+9]="null-sunk",i.includes(a+9)||i.push(a+9))),(a+s)%10!=0&&(t[a+s]="null-sunk",i.includes(a+s)||i.push(a+s),a+s-10>=0&&(t[a+s-10]="null-sunk",i.includes(a+s-10)||i.push(a+s-10)),a+s+10<100&&(t[a+s+10]="null-sunk",i.includes(a+s+10)||i.push(a+s+10)));for(var c=a;c<a+s;c++)t[c]=t[c].slice(0,-3),t[c]+="destroyed",c+10<100&&(t[c+10]="null-sunk",i.includes(c+10)||i.push(c+10)),c-10>=0&&(t[c-10]="null-sunk",i.includes(c-10)||i.push(c-10))}else{a-10>=0&&(t[a-10]="null-sunk",i.includes(a-10)||i.push(a-10),a%10!=0&&(t[a-11]="null-sunk",i.includes(a-11)||i.push(a-11)),(a-9)%10!=0&&(t[a-9]="null-sunk",i.includes(a-9)||i.push(a-9))),a+10*s<100&&(t[a+10*s]="null-sunk",i.includes(a+10*s)||i.push(a+10*s),a%10!=0&&(t[a+10*s-1]="null-sunk",i.includes(a+10*s-1)||i.push(a+10*s-1)),(a-9)%10!=0&&(t[a+10*s+1]="null-sunk",i.includes(a+10*s+1)||i.push(a+10*s+1)));for(var u=a;u<a+10*s;u+=10)t[u]=t[u].slice(0,-3),t[u]+="destroyed",(u-9)%10!=0&&(t[u+1]="null-sunk",i.includes(u+1)||i.push(u+1)),u%10!=0&&(t[u-1]="null-sunk",i.includes(u-1)||i.push(u-1))}}(a),l.shipToDestroy=""):(l.lastHitIndex=n,l.shipToDestroy=a)}i.push(n),l.posiblePositions=[]},addShipToBoard:function(e,n){var t=!1===l.verticalShip?"X":"Y";l.shipsOnBoard[n]=g(n,t,e),r()},randomlyAddShips:function(){a("Carrier"),a("Battleship"),a("Cruiser"),a("Submarine"),a("Destroyer")},removeShipFromBoard:function(e){delete l.shipsOnBoard[e],r()},checkAvailableSpaces:i,checkingForDefeat:function(e){for(var n=0,t=0,r=Object.entries(l.shipsOnBoard);t<r.length;t++){var i=Object(u.a)(r[t],2);i[0];i[1].isSunk&&n++}return n>=5||!!e&&n},verticalShip:!1,changeShipDirection:n,attackedPositions:[],lastHitIndex:undefined,posiblePositions:[],shipToDestroy:"",computerRandomAttack:c,computerAttack:function(){""===l.shipToDestroy?c():o()}};return l},x=function(){var e={Carrier:5,Battleship:4,Cruiser:3,Submarine:3,Destroyer:2},n=function(){return s.verticalShip=!s.verticalShip},t=function(n){var t=s.board,r=s.shipsOnBoard,i=r[n].axis,a=r[n].index,c=e[n],u=1;if("X"===i){a%10!=0&&(t[a-1]="null",""===t[a-1+10]&&(t[a-1+10]="null"),""===t[a-1-10]&&(t[a-1-10]="null")),(a+c)%10!=0&&(t[a+c]="null",""===t[a+c+10]&&(t[a+c+10]="null"),""===t[a+c-10]&&(t[a+c-10]="null"));for(var o=a;o<a+c;o++)t[o]="".concat(n).concat(u),o+10<100&&(t[o+10]="null"),o-10>-1&&(t[o-10]="null"),u++}else{a>=10&&(t[a-10]="null",""==t[a-10+1]&&(a-9)%10!=0&&(t[a-10+1]="null"),""==t[a-10-1]&&a%10!=0&&(t[a-10-1]="null")),a+10*c<100&&(t[a+10*c]="null",""==t[a+10*c+1]&&(a-9)%10!=0&&(t[a+10*c+1]="null"),""==t[a+10*c-1]&&a%10!=0&&(t[a+10*c-1]="null"));for(var l=a;l<a+10*r[n].length;l+=10)t[l]="".concat(n).concat(u),l%10!=0&&(t[l-1]="null"),(l-9)%10!=0&&(t[l+1]="null"),u++}},r=function(n){var t=e[n],r=[];if(s.verticalShip){for(var i=0;i<s.board.length;i++)if(!(i+10*t>109)&&""===s.board[i]){for(var a=1,c=i+10;c<10*t+i&&""===s.board[c];c+=10)a++;a===t&&r.push(i)}}else for(var u=0;u<s.board.length;u++){var o="".concat(u);if(""===s.board[u]&&(o[1]<11-t||o<11-t)){for(var l=1,d=u+1;d<t+u&&""===s.board[d];d++)l++;l===t&&r.push(u)}}return r},i=function(e){Math.random()>.5&&n();var t=r(e);0===t.length&&(s.changeShipDirection(),t=r(e));var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return Math.floor(Math.random()*e)}(t.length);s.addShipToBoard(t[i],e)},s={board:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],shipsOnBoard:{},recieveAttack:function(n){var t=s.board,r=s.shipsOnBoard,i=s.attackedPositions;if(!i.includes(n)){var a=t[n];if(""===a)t[n]="miss";else if("null"===a)t[n]+="-miss";else{var c=a.slice(0,-1);r[c].addHit(),t[n]+="-hit",r[c].isSunk&&function(n){var t=s.board,r=s.shipsOnBoard,i=s.attackedPositions,a=e[n],c=t.indexOf(t.find((function(e){return e.includes("".concat(n,"1"))})));if("X"===r[n].axis){c%10!=0&&(t[c-1]="null-sunk",i.includes(c-1)||i.push(c-1),c-11>=0&&(t[c-11]="null-sunk",i.includes(c-11)||i.push(c-11)),c+9<100&&(t[c+9]="null-sunk",i.includes(c+9)||i.push(c+9))),(c+a)%10!=0&&(t[c+a]="null-sunk",i.includes(c+a)||i.push(c+a),c+a-10>=0&&(t[c+a-10]="null-sunk",i.includes(c+a-10)||i.push(c+a-10)),c+a+10<100&&(t[c+a+10]="null-sunk",i.includes(c+a+10)||i.push(c+a+10)));for(var u=c;u<c+a;u++)t[u]=t[u].slice(0,-3),t[u]+="destroyed",u+10<100&&(t[u+10]="null-sunk",i.includes(u+10)||i.push(u+10)),u-10>=0&&(t[u-10]="null-sunk",i.includes(u-10)||i.push(u-10))}else{c-10>=0&&(t[c-10]="null-sunk",i.includes(c-10)||i.push(c-10),c%10!=0&&(t[c-11]="null-sunk",i.includes(c-11)||i.push(c-11)),(c-9)%10!=0&&(t[c-9]="null-sunk",i.includes(c-9)||i.push(c-9))),c+10*a<100&&(t[c+10*a]="null-sunk",i.includes(c+10*a)||i.push(c+10*a),c%10!=0&&(t[c+10*a-1]="null-sunk",i.includes(c+10*a-1)||i.push(c+10*a-1)),(c-9)%10!=0&&(t[c+10*a+1]="null-sunk",i.includes(c+10*a+1)||i.push(c+10*a+1)));for(var o=c;o<c+10*a;o+=10)t[o]=t[o].slice(0,-3),t[o]+="destroyed",(o-9)%10!=0&&(t[o+1]="null-sunk",i.includes(o+1)||i.push(o+1)),o%10!=0&&(t[o-1]="null-sunk",i.includes(o-1)||i.push(o-1))}}(c)}i.push(n)}},addShipToBoard:function(e,n){var r=!1===s.verticalShip?"X":"Y";s.shipsOnBoard[n]=g(n,r,e),function(){var e=s.shipsOnBoard;s.board.forEach((function(e){return""}));for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t(i)}}()},checkingForDefeat:function(){for(var e=0,n=0,t=Object.entries(s.shipsOnBoard);n<t.length;n++){var r=Object(u.a)(t[n],2);r[0];r[1].isSunk&&e++}return e>=5},verticalShip:!1,changeShipDirection:n,randomlyAddShips:function(){i("Carrier"),i("Battleship"),i("Cruiser"),i("Submarine"),i("Destroyer")},checkAvailableSpaces:r,attackedPositions:[]};return s},B=(t(13),{0:"Carrier",1:"Battleship",2:"Cruiser",3:"Submarine",4:"Destroyer"}),P={0:5,1:4,2:3,3:3,4:2},C=function(){var e=Object(r.useState)((function(){return y()})),n=Object(u.a)(e,2),t=n[0],i=n[1],s=Object(r.useState)((function(){return x()})),a=Object(u.a)(s,2),o=a[0],l=a[1],h=Object(r.useState)((function(){return"player"})),p=Object(u.a)(h,2),f=p[0],b=p[1],j=Object(r.useState)((function(){return!1})),k=Object(u.a)(j,2),g=k[0],C=k[1],A=Object(r.useState)((function(){return!1})),w=Object(u.a)(A,2),D=w[0],T=w[1],G=Object(r.useState)((function(){return""})),N=Object(u.a)(G,2),E=N[0],M=N[1],F=Object(r.useState)((function(){return 0})),I=Object(u.a)(F,2),X=I[0],Y=I[1],H=Object(r.useState)((function(){return[]})),L=Object(u.a)(H,2),R=L[0],J=L[1];Object(r.useEffect)((function(){t.checkingForDefeat()&&setTimeout((function(){return M("player")}),2e3)}),[t]),Object(r.useEffect)((function(){o.checkingForDefeat()&&setTimeout((function(){return M("computer")}),2e3)}),[o]),Object(r.useEffect)((function(){!0===g&&q()}),[g]),Object(r.useEffect)((function(){var e=t.checkingForDefeat(),n=o.checkingForDefeat();"computer"!==f||n||e||setTimeout(z,1e3)}),[f]),Object(r.useEffect)((function(){var e=B[X],n=t.checkAvailableSpaces(e);J(n)}),[X,D]);var U=function(){C(!1),i((function(){return y()})),l((function(){return x()})),T(!1),Y(0),M(""),b("player")},W=function(){return b("player"===f?"computer":"player")},_=function(e){return R.includes(e)},q=function(){var e=Object(c.a)({},o);e.randomlyAddShips(),l(e)},z=function(){W();var e=Object(c.a)({},t);e.computerAttack(),i(e)};return Object(d.jsxs)("section",{className:"App",children:[""===E?Object(d.jsx)(O,{triggerGameStart:function(){X>=5&&!g&&C(!g)},resetGame:U,switchShipAxis:function(){T(!D);var e=Object(c.a)({},t);e.changeShipDirection(),i(e)},verticalAxis:D,removeLastShip:function(){if(!(X<=0)){var e=Object(c.a)({},t),n=B[X-1];e.removeShipFromBoard(n),i(e),Y((function(e){return e-1}))}},randomlyAddPlayerShips:function(){var e=Object(c.a)({},t);e.randomlyAddShips(),"Y"===e.shipsOnBoard.Destroyer.axis?T(!0):T(!1),i(e),Y(5)},hasGameStarted:g}):"",""===E?Object(d.jsx)(v,{hasGameStarted:g,addPlayerShip:function(e){if(!0!==g&&_(e)){var n=Object(c.a)({},t);n.addShipToBoard(e,B[X]),i(n),Y((function(e){return e+1}))}},handlePlayerAttack:function(e){if("computer"!==f&&!t.checkingForDefeat()){var n=Object(c.a)({},o),r=n.board;r[e].includes("miss")||r[e].includes("sunk")||r[e].includes("destroyed")||r[e].includes("hit")||(W(),n.recieveAttack(e),l(n))}},playerBoard:t,computerBoard:o,showShipPreview:function(e){if(!(X>=5)){var n=+e.target.id;if(_(n)){var t=P[X]-1;if(D)for(var r=n;r<=n+10*t;r+=10)document.getElementById("".concat(r)).style.backgroundColor="#00b4d8";else for(var i=n;i<=n+t;i++)document.getElementById("".concat(i)).style.backgroundColor="#00b4d8"}else e.target.style.backgroundColor="red"}},hideShipPreview:function(e){if(!(X>=5)){var n=+e.target.id;if(_(n)){var r=P[X]-1;if(D)for(var i=n;i<=n+10*r;i+=10)document.getElementById("".concat(i)).style.backgroundColor="rgb(30, 30, 30)";else for(var s=n;s<=n+r;s++)document.getElementById("".concat(s)).style.backgroundColor="rgb(30, 30, 30)"}else t.board[n].length<=4?e.target.style.backgroundColor="rgb(30, 30, 30)":e.target.style.backgroundColor="#3E78B2"}}}):Object(d.jsx)(m,{whoLost:E,resetGame:U}),""===E?Object(d.jsx)(S,{}):""]})};a.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.79c7f4ea.chunk.js.map